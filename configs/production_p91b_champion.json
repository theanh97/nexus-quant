{
  "_comment": "PRODUCTION CONFIG — P91b Champion + Vol Tilt + Vol Regime Overlay (Phase 129)",
  "_version": "2.48.0",
  "_created": "2026-02-21",
  "_validated": "Phases 91-129: walk-forward stable, OOS validated; breadth regime switching v2.2.0; dispersion v2.3.0; TS overlay v2.4.0; TS fine-tune v2.5.0; F168 v2.6.0; vol fine-tune v2.7.0; breadth lb=192 LOYO 5/5 v2.8.0 OBJ=2.2095; TS short=12h long=96h LOYO 4/5 WF 2/2 v2.9.0 OBJ=2.2423; TS thresh re-sweep P168 rt=0.60 rs=0.40 bs=1.25 LOYO 4/5 v2.10.0 OBJ=2.3510 (Δ=+0.1087); boost fine-tune P169 bt=0.25 bs=1.50 LOYO 3/5 v2.11.0 OBJ=2.3599 (Δ=+0.0089); disp fine-tune P170 scale=1.05 thr=0.60 pct=240 LOYO 4/5 v2.12.0 OBJ=2.4148 (Δ=+0.0549); Vol overlay re-tune (P171): scale=0.4/boost=0.1/thr=0.5 LOYO 3/5 Δ=+0.0005 OBJ=2.4153 — PRODUCTION v2.13.0; I460 bw=120 P172 LOYO 4/5 v2.14.0 OBJ=2.4299 (Δ=+0.0146); Regime weight re-opt (P172): LOW_f168=0.3/MID_f168=0.3/HIGH_f168=0.15 LOYO 3/5 Δ=+0.0664 OBJ=2.4817 — PRODUCTION v2.14.0; I415 bw sweep P175: bw=216→144 LOYO 3/5 Δ=+0.0436 OBJ=2.5396 — PRODUCTION v2.15.0; Disp overlay P179: scale=1.05→1.0 thr=0.60 LOYO 4/5 Δ≈+0.009 — PRODUCTION v2.16.0; Breadth thr P181: PL=0.35→0.2 PH=0.65→0.6 LOYO 5/5 Δ=+0.0401 — PRODUCTION 2.17.0; Regime weight re-opt P182: LOW_f168=0.35 MID_f168=0.35 HIGH_f168=0.1 LOYO 5/5 Δ=+0.0461 — PRODUCTION 2.18.0; FTS boost re-tune (P176): bt=0.35/bs=1.6 LOYO 3/5 Δ=+0.0078 OBJ=2.4895 — PRODUCTION v2.15.0; V1 weights re-tune P185: wc=0.35 wm=0.4 wr=0.25 LOYO 4/5 Δ=+0.0256 OBJ=2.5945 — PRODUCTION 2.15.1; [META FIX] Version corrected to 2.19.0: accounts for P179(disp scale=1.0)+P181(breadth PL=0.20 PH=0.60)+P182(regime weights LOW/MID f168=0.35 HIGH f168=0.10)+P185(V1 wc=0.35 wm=0.40 wr=0.25 LOYO 4/5 OBJ=2.5945); V1 mr_lb re-sweep P187: 72→84 LOYO 4/5 Δ=+0.1158 OBJ=2.7103 — PRODUCTION 2.20.0; Regime V1 weight re-opt P189: LOW_v1=0.4000 MID_v1=0.3000 HIGH_v1=0.0600 LOYO 4/5 Δ=+0.1403 OBJ=2.8506 — PRODUCTION 2.21.0; V1 weight extend P190: LOW_v1=0.4800 MID_v1=0.3500 LOYO 4/5 Δ=+0.0154 OBJ=2.8660 — PRODUCTION 2.22.0; V1 vol_lb sweep P190: 168→192 LOYO 4/5 Δ=+0.0185 OBJ=2.8691 — PRODUCTION 2.23.0; I460 bw sweep P194: 120->168 LOYO 3/5 delta=+0.0106 OBJ=2.8797 — PRODUCTION 2.24.0; WF Validation P195: WF CONFIRMED v2.24.0 OBJ=2.8797 WF 3/3 avg_OOS_delta=+0.6524; FTS threshold re-tune P197: rt=0.60->0.65 rs=0.40->0.45 bt=0.35->0.25 bs=1.60->1.70 LOYO 3/5 delta=+0.0198 OBJ=2.8995 — PRODUCTION 2.26.0; Vol overlay retune P198: vol_scale=0.40->0.30 f168_boost=0.10->0.00 LOYO 3/5 delta=+0.0633 OBJ=2.9628 — PRODUCTION 2.27.0; FTS window retune P200: short=12->16 long=96->72 LOYO 3/5 delta=+0.0456 OBJ=3.0084 — PRODUCTION 2.28.0; WF Validation P201: WF CONFIRMED 2.28.0 OBJ=3.0243 WF 3/3 avg_OOS_delta=+0.7865; MID+LOW weight tune P202: MID_f168=0.68->0.70 LOW_v1=0.46->0.44 LOYO 4/5 delta=+0.0554 OBJ=3.0797 — PRODUCTION 2.31.0; HIGH regime weight P204: v1=0.06->0.04 f168=0.15->0.18 LOYO 3/5 delta=+0.0052 OBJ=3.0849 — PRODUCTION 2.32.0; Signal lev P213b: idio=0.30->0.20 f168=0.25->0.25 LOYO 5/5 delta=+0.0753 OBJ=3.1603 — PRODUCTION 2.34.0; FTS retune P215: rt=0.65->0.65 rs=0.45->0.30 bs=1.70->1.85 LOYO 3/5 delta=+0.0180 OBJ=3.2689 — PRODUCTION 2.35.0; MID+LOW P221: MID_f168=0.78->0.78 LOW_v1=0.46->0.40 LOYO 4/5 delta=+0.0077 OBJ=3.2766 — PRODUCTION 2.39.0 | v2.41.1 HIGH v1=0.06 idio=0.940 f168=0.0 OBJ=3.3151 LOYO=4/5",
  "run_name": "production_p91b",
  "seed": 42,
  "venue": {
    "name": "binance_usdm",
    "kind": "crypto_perp",
    "vip_tier": 0,
    "maker_fee_rate": 0.0002,
    "taker_fee_rate": 0.0005
  },
  "data": {
    "provider": "binance_rest_v1",
    "symbols": [
      "BTCUSDT",
      "ETHUSDT",
      "SOLUSDT",
      "BNBUSDT",
      "XRPUSDT",
      "ADAUSDT",
      "DOGEUSDT",
      "AVAXUSDT",
      "DOTUSDT",
      "LINKUSDT"
    ],
    "bar_interval": "1h",
    "cache_dir": ".cache/binance_rest"
  },
  "data_policy": {
    "_comment": "Hard gate: production only accepts real, whitelisted providers",
    "require_real_data": true,
    "allowed_providers": [
      "binance_rest_v1"
    ],
    "strict_unknown_provider": true,
    "allow_synthetic": false
  },
  "execution": {
    "style": "taker",
    "slippage_bps": 3.0,
    "spread_bps": 0.0,
    "impact": {
      "model": "none",
      "coef_bps": 0.0
    }
  },
  "costs": {
    "fee_rate": 0.0005,
    "slippage_rate": 0.0003,
    "taker_fee_rate": 0.0005,
    "maker_fee_rate": 0.0002,
    "cost_multiplier": 1.0
  },
  "risk": {
    "max_drawdown": 0.25,
    "max_turnover_per_rebalance": 0.8,
    "max_gross_leverage": 0.7,
    "max_position_per_symbol": 0.3
  },
  "volume_tilt": {
    "_comment": "Phase 111-113: reduce leverage when aggregate volume momentum is high (crowded market)",
    "_validated": "3/4 WF windows positive, avg Δ=+0.066, ratio perfectly stable (std=0.00)",
    "enabled": true,
    "lookback_bars": 168,
    "tilt_ratio": 0.65,
    "signal": "vol_mom_z",
    "condition": "z_score > 0 → multiply returns by tilt_ratio",
    "mechanism": "Sum perp_volume across all symbols → log momentum (168h) → rolling z-score → contrarian tilt"
  },
  "vol_regime_overlay": {
    "_comment": "Phase 127-129 + fine-tuned P156: reduce leverage + tilt F168 when BTC price vol is high",
    "_validated": "P129 LOYO 3/5 wins avg Δ=+0.232; P156 fine-tune: scale 0.50→0.40 + boost 0.20→0.15, LOYO 4/5 OBJ=2.1448; P171 retune LOYO 3/5 Δ=+0.0005",
    "enabled": true,
    "window_bars": 168,
    "threshold": 0.5,
    "scale_factor": 0.4,
    "f144_boost": 0.0,
    "signal": "btc_rolling_price_vol",
    "condition": "ann_vol > 0.50 → tilt F168 +15% and scale leverage ×0.40",
    "mechanism": "BTC hourly returns → rolling 168h std × √8760 → if > 0.50 → reduce ×0.40 + tilt F168 +15%. Fine-tuned P156: less aggressive = more alpha in vol regime."
  },
  "ensemble": {
    "_comment": "4-signal blend — DO NOT remove v1 (regime insurance, Phase 102)",
    "weights": {
      "v1": 0.2747,
      "i460bw168": 0.1967,
      "i415bw216": 0.3247,
      "f144": 0.2039
    },
    "signals": {
      "v1": {
        "strategy": "nexus_alpha_v1",
        "params": {
          "k_per_side": 2,
          "w_carry": 0.15,
          "w_mom": 0.55,
          "w_mean_reversion": 0.3,
          "momentum_lookback_bars": 312,
          "mean_reversion_lookback_bars": 84,
          "vol_lookback_bars": 192,
          "target_gross_leverage": 0.35,
          "rebalance_interval_bars": 60
        }
      },
      "i460bw168": {
        "strategy": "idio_momentum_alpha",
        "params": {
          "k_per_side": 4,
          "lookback_bars": 480,
          "beta_window_bars": 168,
          "target_gross_leverage": 0.2,
          "rebalance_interval_bars": 48
        }
      },
      "i415bw216": {
        "strategy": "idio_momentum_alpha",
        "params": {
          "k_per_side": 4,
          "lookback_bars": 415,
          "beta_window_bars": 144,
          "target_gross_leverage": 0.2,
          "rebalance_interval_bars": 48
        }
      },
      "f144": {
        "strategy": "funding_momentum_alpha",
        "params": {
          "k_per_side": 2,
          "funding_lookback_bars": 168,
          "direction": "contrarian",
          "target_gross_leverage": 0.25,
          "rebalance_interval_bars": 36
        }
      }
    }
  },
  "monitoring": {
    "_comment": "Thresholds for live monitoring — halt trading if breached",
    "halt_conditions": {
      "rolling_30d_sharpe_below": -1.0,
      "max_drawdown_pct": 15.0,
      "max_daily_loss_pct": 5.0,
      "correlation_with_btc_above": 0.6,
      "consecutive_losing_days": 14
    },
    "warning_conditions": {
      "rolling_30d_sharpe_below": 0.0,
      "drawdown_pct_above": 8.0,
      "daily_turnover_above_pct": 50.0
    },
    "expected_performance": {
      "annual_sharpe_backtest": 4.2978,
      "annual_sharpe_realistic": 0.8,
      "annual_sharpe_conservative": 0.7,
      "max_drawdown_backtest_pct": 25.1,
      "expected_live_drawdown_pct": 15.0,
      "is_oos_degradation_ratio": 0.5
    }
  },
  "position_sizing": {
    "_comment": "Guidelines for different account sizes",
    "target_gross_leverage": 0.35,
    "max_gross_leverage": 0.7,
    "sizing_rules": {
      "small_account_under_10k": {
        "note": "Minimum viable: $10K. Below this, fees eat too much alpha.",
        "leverage": 0.35,
        "max_position_usd": 3500
      },
      "medium_account_10k_100k": {
        "note": "Sweet spot. Full strategy as designed.",
        "leverage": 0.35,
        "max_position_usd_pct": 0.3
      },
      "large_account_100k_plus": {
        "note": "May need to reduce leverage or add execution optimization.",
        "leverage": 0.25,
        "max_position_usd_pct": 0.2,
        "consider_maker_orders": true
      }
    }
  },
  "operational": {
    "rebalance_frequency": "hourly",
    "data_refresh_interval_minutes": 60,
    "warmup_bars_required": 500,
    "timezone": "UTC",
    "api_rate_limit_buffer_pct": 20,
    "max_retries_on_api_error": 3,
    "retry_delay_seconds": 5
  },
  "global_ls_overlay": {
    "_comment": "Phase 118b: Binance Vision global long/short ratio z-score overlay",
    "_validated": "IS avg Δ=+0.380 (2022/2023/2024), OOS 2025 Δ=+0.1764 — WF PASS (3 IS + OOS primary gate)",
    "_candidate_notes": "taker_ls_z168_low also passes (OOS25=+0.07, OOS26=+0.17) — consider Phase 119 test",
    "enabled": true,
    "metric": "global_ls_ratio",
    "lookback_bars": 168,
    "tilt_ratio": 0.65,
    "direction": "reduce_on_low",
    "mechanism": "Binance Vision global L/S account ratio → log momentum → rolling 168h z-score → when z < 0 (crowd net short) → reduce portfolio returns by tilt_ratio=0.65 (contrarian protection)",
    "data_source": "data.binance.vision daily metrics CSV resampled to 1h; local cache in .cache/binance_vision_metrics/",
    "walk_forward": {
      "2022_is": "+0.270",
      "2023_is": "+0.480",
      "2024_is": "+0.390",
      "2025_oos": "+0.1764",
      "2026_ytd_oos": "-0.0297 (51 days, within noise)"
    },
    "date_integrated": "2026-02-21"
  },
  "breadth_regime_switching": {
    "_comment": "Phase 144-146 + fine-tuned P158: Breadth regime classifier for dynamic weight switching",
    "_validated": "P144-P146 orig; P158 param sweep LOYO 5/5 (perfect!) OBJ=2.2095 (Δ=+0.0647) — lb=192 pw=336 p=0.35/0.65; V1 vol_lb sweep P190: vol_lb=168→192 LOYO 4/5 Δ=+0.0185 OBJ=2.8691",
    "enabled": true,
    "n_regimes": 3,
    "signal": "cross_sectional_price_breadth",
    "breadth_lookback_bars": 192,
    "rolling_percentile_window": 336,
    "p_low": 0.3,
    "p_high": 0.68,
    "regime_weights": {
      "LOW": {
        "f168": 0.4,
        "v1": 0.3,
        "i460bw168": 0.1,
        "i415bw216": 0.2,
        "_regime": "LOW momentum (<20th pct breadth) — defensive"
      },
      "MID": {
        "f168": 0.7,
        "v1": 0.15,
        "i460bw168": 0.0,
        "i415bw216": 0.15,
        "_regime": "MID momentum (20-60%) — balanced"
      },
      "HIGH": {
        "f168": 0.0,
        "v1": 0.35,
        "i460bw168": 0.65,
        "i415bw216": 0.0,
        "_regime": "HIGH momentum (>60th pct) — momentum-heavy"
      }
    },
    "mechanism": "At each bar: compute % symbols with positive 192h return (breadth). Rolling percentile rank vs prior 336h. If <20th pct -> LOW weights. If 20-60% -> MID weights. If >60% -> HIGH weights. P158 tune: lb=192, thresholds 0.35/0.65. P181 tune: PL=0.20 PH=0.60 (wider HIGH band). P182 tune: LOW/MID f168=0.35 HIGH f168=0.10."
  },
  "funding_dispersion_overlay": {
    "_comment": "Phase 148: Funding rate cross-sectional dispersion boost — fine-tuned P170",
    "_validated": "P148 orig LOYO 3/5 OBJ=1.8886; P170 fine-tune scale=1.05 thr=0.60 pct=240 LOYO 4/5 OBJ=2.4148 (Δ=+0.0549). Key finding: scale was over-boosting (1.15→1.05), shorter lookback (336→240) more responsive",
    "enabled": true,
    "signal": "funding_rate_cross_sectional_std",
    "percentile_window": 240,
    "boost_threshold_pct": 0.6,
    "boost_scale": 1.0,
    "mechanism": "At each bar: compute std of funding rates across all 10 symbols. Rolling 240h percentile rank. If std_pct > 0.60 → boost portfolio returns ×1.05. P170 fine-tune: scale 1.15→1.05 (less aggressive, TS overlay already handles amplification), thr 0.75→0.60 (wider but gentler trigger), pct 336→240 (more responsive 10-day window). LOYO 4/5 Δ=+0.0549."
  },
  "funding_term_structure_overlay": {
    "_comment": "Phase 150/152/164-165: Bidirectional funding term structure spread overlay — windows fine-tuned P164-165",
    "_validated": "P150b LOYO 4/5, avg_delta=+0.1600, OBJ=2.0079; P152 WF 2/2 avg_delta=+0.1077, fine-tuned OBJ=2.0851; P164-165 window sweep: short=12h long=96h LOYO 4/5 WF 2/2 avg_delta=+0.1264 OBJ=2.2423 (Δ=+0.0328 vs v2.8.0); P168 threshold re-sweep rt=0.60 rs=0.40 bs=1.25 LOYO 4/5 OBJ=2.3510; P169 boost fine-tune bt=0.25 bs=1.50 LOYO 3/5 OBJ=2.3599 (Δ=+0.0089); P176 boost retune LOYO 3/5 Δ=+0.0078",
    "enabled": true,
    "signal": "funding_term_structure_spread",
    "short_window_bars": 16,
    "long_window_bars": 72,
    "rolling_percentile_window": 336,
    "reduce_threshold": 0.55,
    "reduce_scale": 0.05,
    "boost_threshold": 0.22,
    "boost_scale": 2.0,
    "mechanism": "spread = rolling_mean(cross-sectional funding, 12h) - rolling_mean(cross-sectional funding, 96h). Rolling percentile (336h). If spread_pct > 60th: scale×0.40. If spread_pct < 25th: scale×1.50. P168 re-sweep: rt=0.70→0.60, rs=0.60→0.40, bs=1.15→1.25. P169 fine-tune: bt=0.30→0.25 (tighter boost window), bs=1.25→1.50 (stronger boost). Peak at bs=1.50 confirmed (bs=1.60 regresses). LOYO 3/5 Δ=+0.0089."
  },
  "fts_overlay_params": {
    "ts_pct_window_bars": 288,
    "ts_rt": 0.65,
    "ts_rs": 0.35,
    "ts_bt": 0.25,
    "ts_bs": 2.5,
    "per_regime_rs": {
      "LOW": 0.05,
      "MID": 0.05,
      "HIGH": 0.25
    },
    "per_regime_bs": {
      "LOW": 4.0,
      "MID": 2.0,
      "HIGH": 2.0
    },
    "per_regime_rt": {
      "LOW": 0.8,
      "MID": 0.65,
      "HIGH": 0.5
    },
    "per_regime_bt": {
      "LOW": 0.3,
      "MID": 0.4,
      "HIGH": 0.2
    },
    "per_regime_ts_pct_win": {
      "LOW": 240,
      "MID": 288,
      "HIGH": 400
    },
    "LOW": {
      "rs": 0.05,
      "bs": 4.0,
      "rt": 0.8,
      "bt": 0.33
    },
    "MID": {
      "rs": 0.05,
      "bs": 2.5,
      "rt": 0.65,
      "bt": 0.22
    },
    "HIGH": {
      "rs": 0.4,
      "bs": 2.25,
      "rt": 0.5,
      "bt": 0.22
    }
  },
  "vol_overlay_params": {
    "per_regime_threshold": {
      "LOW": 0.5,
      "MID": 0.5,
      "HIGH": 0.55
    },
    "per_regime_scale": {
      "LOW": 0.4,
      "MID": 0.15,
      "HIGH": 0.05
    }
  },
  "disp_overlay_params": {
    "per_regime_threshold": {
      "LOW": 0.7,
      "MID": 0.7,
      "HIGH": 0.4
    },
    "per_regime_scale": {
      "LOW": 0.5,
      "MID": 1.5,
      "HIGH": 0.5
    }
  },
  "version": "v2.42.18",
  "v1_per_regime_weights": {
    "LOW": {
      "w_carry": 0.1,
      "w_mom": 0.45,
      "w_mean_reversion": 0.45
    },
    "MID": {
      "w_carry": 0.25,
      "w_mom": 0.5,
      "w_mean_reversion": 0.25
    },
    "HIGH": {
      "w_carry": 0.25,
      "w_mom": 0.5,
      "w_mean_reversion": 0.25
    }
  }
}